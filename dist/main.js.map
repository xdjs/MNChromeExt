{
  "version": 3,
  "sources": ["../src/frontend/popup/ui.js", "../src/frontend/popup/multi-ui.js", "../src/backend/client/cache.js", "../src/connections/api.js", "../src/backend/browserInfo.js", "../src/backend/client/collabs.js", "../src/connections/fetchArtists.js", "../src/frontend/popup/main.js"],
  "sourcesContent": ["export function renderArtist(a){\n    \n    console.log(a);\n    // if(!a){ \n    //     document.body.innerHTML = `\n    //         <div style=\"padding: 20px; text-align: center;\">\n    //             <h3>Artist Not Yet in Database</h3>\n    //             <p>This artist isn't in our MusicNerd Database yet.</p>\n    //             <p><a href=\"https://www.musicnerd.xyz\" target=\"_blank\">Visit MusicNerd.xyz</a> to suggest additions!</p>\n    //         </div>\n    //     `; \n    //     return; \n    // }\n\n    console.log(a.bio);\n    const titleEl = document.getElementById('title');\n    const bioEl = document.getElementById('bio');\n    const linksTitleEl = document.getElementById('links-title');\n    const linksListEl  = document.getElementById('links-list');\n\n    const musicNerdEl = document.getElementById('MN-link');\n\n        musicNerdEl.textContent = document.createElement('a');\n        if (a.id) {\n            musicNerdEl.href =  `https://www.musicnerd.xyz/artist/` + a.id;\n        }\n        else {\n            musicNerdEl.href =  `https://www.musicnerd.xyz`;\n        }\n        musicNerdEl.className = 'flex items-center gap-3 hover:bg-gray-50 p-2 rounded';\n        musicNerdEl.target = '_blank';\n    \n        const MNurl = document.createElement('p');\n              MNurl.className = 'text-sm text-gray-500 truncate';\n              if (a.id) {\n                MNurl.textContent = 'View on MusicNerd.xyz';\n              }\n              else {\n                MNurl.textContent = 'Add them on MusicNerd.xyz';\n              }\n              \n    \n        musicNerdEl.appendChild(MNurl);\n    \n\n    \n\n    titleEl.textContent = a.name ?? \"Sorry, we don't know this artist!\";\n    bioEl.textContent = typeof a.bio === 'string' ? a.bio : (a.bio?.bio ?? a.bio?.text ?? \"No bio Available\");\n    if (!a.id) {\n        bioEl.textContent = \"\";\n    }\n\n\n    \n\n    // Populate links header - hide if no artist ID\n    if (linksTitleEl) {\n      if (a.id) {\n        linksTitleEl.textContent = `${a.name ?? 'Artist'}'s Links`;\n        linksTitleEl.style.display = 'block';\n      } else {\n        linksTitleEl.style.display = 'none';\n      }\n    }\n\n    // Clear previous list items\n    if (linksListEl) {\n      linksListEl.innerHTML = '';\n\n\n\n      if (Array.isArray(a.links) && a.links.length > 0) {\n        a.links.forEach(l => {\n          const li = document.createElement('li');\n\n          // Create clickable link wrapper\n          const linkWrapper = document.createElement('a');\n          linkWrapper.href = l.url ?? l.href ?? '#';\n          linkWrapper.target = '_blank'; // Open in new tab\n          linkWrapper.className = 'flex items-center gap-3 hover:bg-gray-50 p-2 rounded';\n          \n          const label = document.createElement('p');\n          label.className = 'font-semibold uppercase text-sm text-blue-600 hover:text-blue-800';\n          label.textContent = l.label ?? l.title ?? 'Link';\n\n          const url = document.createElement('p');\n          url.className = 'text-sm text-gray-500 truncate';\n          if (l.platform_type_list && l.platform_type_list.includes('social')) {\n            url.textContent = a[l.label] ?? l.url ?? l.href ?? '';\n          }\n          else {\n            url.textContent = '';\n          }\n\n          const img = document.createElement('img');\n          img.src = l.image;\n          img.alt = 'Artist Photo'\n          img.className = 'w-8 h-8 rounded-full object-cover flex-shrik-0'; \n\n          const textContainer = document.createElement('div');\n          textContainer.className = 'flex-1 min-w-0';\n\n          textContainer.appendChild(label);\n          textContainer.appendChild(url);\n\n          linkWrapper.appendChild(img);\n          linkWrapper.appendChild(textContainer);\n          li.appendChild(linkWrapper);\n          linksListEl.appendChild(li);\n        });\n      } else if (a.id) {\n        const li = document.createElement('li');\n        li.className = 'text-gray-400 text-sm';\n        li.textContent = 'No links available';\n        linksListEl.appendChild(li);\n      }\n      else {\n        const li = document.createElement('li');\n        li.className = 'text-gray-400 text-sm';\n        li.textContent = '';\n        linksListEl.appendChild(li);\n      }\n    }\n\n    console.log(titleEl);\n    console.log(bioEl);\n  }\nexport function errorScreen(error) {\n  const titleEl = document.getElementById('title');\n  const bioEl = document.getElementById('bio');\n\nswitch (error) {\n  case \"noArtist\": {\n    titleEl.textContent =\"Sorry, we don't know this artist!\";\n  bioEl.textContent = \"If you'd like, you can add them on MusicNerd!\";\n\n  const musicNerdEl = document.getElementById('MN-link');\n  musicNerdEl.textContent = document.createElement('a');\n  musicNerdEl.className = 'flex items-center gap-3 hover:bg-gray-50 p-2 rounded';\n  musicNerdEl.target = '_blank';\n  musicNerdEl.href =  `https://www.musicnerd.xyz`;\n  const MNurl = document.createElement('p');\n  MNurl.className = 'text-sm text-gray-500 truncate';\n  MNurl.textContent = 'Add them on MusicNerd.xyz';\n  musicNerdEl.appendChild(MNurl);\n  break;\n  }\n\n  case \"noData\": {\n    titleEl.textContent =\"We don't see anything playing!\";\n    bioEl.textContent = \"Start playing something to get started!\";\n    break;\n  }\n\n  case \"notInjected\": {\n    titleEl.textContent =\"Our system isn't hooked up yet.\";\n    bioEl.textContent = \"If you've just installed or reloaded the application, \\n please restart your browser or reload the page.\";\n    break;\n  }\n\n  case \"default\": {\n    titleEl.textContent =\"An error has occured.\";\n    break;\n  }\n\n  default: {\n    titleEl.textContent =\"An error has occured.\";\n    break;\n  }\n}\n\nconsole.log(titleEl);\nconsole.log(bioEl);\n}", "\r\nimport { renderArtist } from \"./ui.js\";\r\n\r\nlet artistList = [];\r\n\r\nlet activeArtistIndex = 0;\r\n\r\nexport function renderArtists(artists) {\r\n    console.log('renderArtists called with:', artists);\r\n    artistList = artists;\r\n\r\n  \r\n  // Single artist - use existing UI\r\n  if (artists.length === 1) {\r\n    console.log('Single artist detected, using regular UI');\r\n    hideArtistTabs();\r\n    renderArtist(artists[0]);\r\n    return;\r\n  }\r\n  \r\n  // Multiple artists - show tab interface\r\n  console.log('Multiple artists detected, showing tabs');\r\n  showArtistTabs(artists);\r\n  renderActiveArtist();\r\n}\r\n\r\nfunction showArtistTabs(artists) {\r\n    const tabsContainer = document.getElementById('artist-tabs');\r\n    const tabsList = document.getElementById('tabs-list');\r\n\r\n    tabsList.innerHTML = '';\r\n    artists.forEach((artist, index) => {\r\n        const tab = document.createElement('button');\r\n        tab.className = `px-4 py-2 text-sm font-medium border-b-2 transition-colors ${\r\n            index === activeArtistIndex\r\n                ? 'border-blue-500 text-blue-600 bg-blue-50'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n        }`;\r\n\r\n        const displayName = artist.name || 'Unknown artist';\r\n        tab.textContent = artist.isPrimary ? `${displayName} \u2B50` : displayName;\r\n\r\n        tab.addEventListener('click', () => switchToArtist(index));\r\n        tabsList.appendChild(tab);\r\n    });\r\n\r\n    tabsContainer.style.display = 'block';\r\n}\r\n\r\nfunction hideArtistTabs() {\r\n    const tabsContainer = document.getElementById('artist-tabs');\r\n    tabsContainer.style.display = 'none';\r\n}\r\n\r\nfunction switchToArtist(index) {\r\n    if (index === activeArtistIndex || !artistList[index]) {\r\n        return;\r\n    }\r\n\r\n    activeArtistIndex = index;\r\n    updateTabStyles();\r\n    renderActiveArtist();\r\n}\r\n\r\nfunction updateTabStyles() {\r\n    const tabs = document.querySelectorAll('#tabs-list button');\r\n  tabs.forEach((tab, index) => {\r\n    if (index === activeArtistIndex) {\r\n      tab.className = 'px-4 py-2 text-sm font-medium border-b-2 border-blue-500 text-blue-600 bg-blue-50 transition-colors';\r\n    } else {\r\n      tab.className = 'px-4 py-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-colors';\r\n    }\r\n  });\r\n}\r\n\r\nfunction renderActiveArtist() {\r\n    const activeArtist = artistList[activeArtistIndex];\r\n    if (activeArtist) {\r\n      renderArtist(activeArtist);\r\n    }\r\n  }\r\n  \r\n\r\n  document.addEventListener('keydown', (e) => {\r\n    if (artistList.length <= 1) return;\r\n    \r\n    if (e.key === 'ArrowLeft' && activeArtistIndex > 0) {\r\n      switchToArtist(activeArtistIndex - 1);\r\n    } else if (e.key === 'ArrowRight' && activeArtistIndex < artistList.length - 1) {\r\n      switchToArtist(activeArtistIndex + 1);\r\n    }\r\n  });", "const cacheLifeTime = 3*60*1000;\r\n\r\nfunction getCacheKey(identifier, type = 'name') {\r\n    return `${type}:${identifier.toLowerCase()}`;\r\n}\r\n\r\nexport async function cacheArtist(identifier, data, type = 'name') {\r\n    const key = getCacheKey(identifier, type);\r\n    const cacheEntry = {\r\n        data,\r\n        timestamp: Date.now(),\r\n        links: data.links || [],\r\n\r\n    };\r\n\r\n    console.log(`cached artist: ${JSON.stringify(cacheEntry)}`);\r\n\r\n    await chrome.storage.local.set({\r\n        [`cache_${key}`]: cacheEntry\r\n    });\r\n\r\n    \r\n}\r\n\r\nexport async function getCachedArtist(identifier, type = 'name') {\r\n    const key = getCacheKey(identifier, type);\r\n    const result = await chrome.storage.local.get(`cache_${key}`);\r\n    const cached = result[`cache_${key}`];\r\n\r\n    if (!cached) {\r\n        return null;\r\n    }\r\n\r\n    if (Date.now() - cached.timestamp > cacheLifeTime) {\r\n        await chrome.storage.local.remove(`cache_${key}`);\r\n        return null;\r\n    }\r\n\r\n    return cached.data;\r\n}\r\n\r\nexport async function clearCache() {\r\n    const allItems = await chrome.storage.local.get();\r\n    const cacheKeys = Object.keys(allItems).filter(key => key.startsWith('cache_'));\r\n    await chrome.storage.local.remove(cacheKeys);\r\n}\r\n\r\nexport async function cacheVideoResult(videoId, artistData) {\r\n    const key = `video_${videoId}`;\r\n    await chrome.storage.local.set({\r\n        [`cache_${key}`]: {\r\n            data: artistData,\r\n            timestamp: Date.now()\r\n        }\r\n    });\r\n}\r\n\r\nexport async function getCachedVideoResult(videoId) {\r\n    const key = `video_${videoId}`;\r\n    const result = await chrome.storage.local.get(`cache_${key}`);\r\n    const cached = result[`cache_${key}`];\r\n    \r\n\r\n    if (!cached) return null;\r\n\r\n    if (Date.now() - cached.timestamp > cacheLifeTime) {\r\n        await chrome.storage.local.remove(`cache_${key}`);\r\n        return null;\r\n    }\r\n\r\n    return cached.data;\r\n}\r\n\r\n\r\nfunction createMediaSessionKey(mediaSessionData) {\r\n    // Create a stable key from title and artist\r\n    const title = (mediaSessionData.title || '').toLowerCase().trim();\r\n    const artist = (mediaSessionData.channel || '').toLowerCase().trim();\r\n    \r\n    // Simple hash or concatenation\r\n    return `${artist}_${title}`.replace(/[^a-z0-9_]/g, '');\r\n}\r\n\r\nexport async function getCachedMediaSessionResult(mediaSessionData) {\r\n    const key = createMediaSessionKey(mediaSessionData);\r\n    const result = await chrome.storage.local.get(`cache_media_${key}`);\r\n    const cached = result[`cache_media_${key}`];\r\n\r\n    console.log(`grabbing cache with key: cache is  ${cached}`);\r\n\r\n    if (!cached) return null;\r\n\r\n    if (Date.now() - cached.timestamp > cacheLifeTime) {\r\n        await chrome.storage.local.remove(`cache_media_${key}`);\r\n        return null;\r\n    }\r\n\r\n    return cached.data;\r\n}\r\n\r\nexport async function cacheMediaSessionResult(mediaSessionData, artistData) {\r\n    const key = createMediaSessionKey(mediaSessionData)\r\n    await chrome.storage.local.set({\r\n        [`cache_media_${key}`]: {\r\n            data: artistData,\r\n            timestamp: Date.now(),\r\n            originalMediaData: mediaSessionData\r\n        }\r\n    });\r\n    console.log(`caching data: ${key}`)\r\n}", "const API = 'https://mn-chrome-ext.vercel.app';\nimport { cacheArtist, getCachedArtist } from '../backend/client/cache.js';\n\n\n\nexport async function fetchArtist(info) {\n\n  console.log('fetchArtist called with:', info);\n\n  const cached = await getCachedArtist(info.id, 'id');\n  if (cached) {console.log(\"[DEBUG: returning cached \" + JSON.stringify(cached) + \"]\"); return cached;}\n\n    \n\n  const url = `${API}/api/artist/by-id/${encodeURIComponent(info.id)}`\n  console.log('Fetching artist from:', url);\n  const r = await fetch(url);\n  const artist = r.ok ? await r.json() : null;\n  console.log('Artist API response:', artist);\n  \n  if (artist && artist.id) {\n    // Fetch links for this artist using the correct endpoint\n    const linksUrl = `${API}/api/urlmap/links/${encodeURIComponent(artist.id)}`;\n    const linksResponse = await fetch(linksUrl);\n    artist.links = linksResponse.ok ? await linksResponse.json() : [];\n\n    cacheArtist(info.id, artist, 'id');\n\n    \n  }\n  \n  return artist;\n}\n\nexport async function fetchArtistFromName(info) {\n\n  // Check cache first\n  const cached = await getCachedArtist(info.channel);\n  if (cached) return cached;\n\n  console.log('fetchArtistFromName called with:', info);\n  // Use batch endpoint with a single username to avoid path issues with '/'\n  const url = `https://api.musicnerd.xyz/api/searchArtists/batch`;\n  console.log('Fetching artist from (batch-single):', info.channel);\n  const r = await fetch(url, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\n    body: JSON.stringify({ query: { artists: [info.channel] } })\n  });\n  const data = r.ok ? await r.json() : { artists: [null] };\n  const artist = Array.isArray(data.results) ? data.results[0] : null;\n  console.log('Artist API response:', artist);\n  \n  if (artist && !artist.error && artist.id) {\n    // Fetch links for this artist using the correct endpoint  \n    const linksUrl = `${API}/api/urlmap/links/${encodeURIComponent(artist.id)}`;\n    const linksResponse = await fetch(linksUrl);\n    artist.links = linksResponse.ok ? await linksResponse.json() : [];\n\n    try {\n      const bioRes = await fetch(`https://api.musicnerd.xyz/api/artistBio/${encodeURIComponent(artist.id)}`, {\n        headers: { Accept: 'application/json' }\n      });\n      if (bioRes.ok) {\n        const bioJson = await bioRes.json();\n        artist.bio = typeof bioJson === 'string' ? bioJson : (bioJson?.bio ?? bioJson?.text ?? null);\n      } else {\n        artist.bio = null;\n      }\n    } catch {\n      artist.bio = null;\n    }\n\n\n    cacheArtist(info.channel, artist);\n  }\n  \n  return artist;\n}\n\nexport async function extractArtistFromTitle(titleOrData) {\n  const url = `${API}/api/openai/extract-artist`;\n  \n  // Support both legacy title string and new data object\n  const requestBody = typeof titleOrData === 'string' \n    ? { title: titleOrData }\n    : { data: titleOrData };\n  \n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json'},\n    body: JSON.stringify(requestBody)\n  });\n\n  if (!response.ok) return null;\n  const data = await response.json();\n  return data.artist; // Returns string or null\n}\n\nexport async function extractMultipleArtistsFromTitle(titleOrData) {\n  const url = `${API}/api/openai/extract-multiple-artists`;\n  \n  // Support both legacy title string and new data object\n  const requestBody = typeof titleOrData === 'string' \n    ? { title: titleOrData }\n    : { data: titleOrData };\n  \n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json'},\n    body: JSON.stringify(requestBody)\n  });\n\n  if (!response.ok) return [];\n  const data = await response.json();\n  return data.artists || []; // Returns array of strings\n}\n\nexport async function fetchMultipleArtistsByNames(artistNames) {\n  if (!artistNames || artistNames.length === 0) return [];\n\n  console.log('fetchMultipleArtistsByNames called with:', artistNames);\n  \n  const url = `https://api.musicnerd.xyz/api/searchArtists/batch`;\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json', 'Accept': 'application/json'},\n    body: JSON.stringify({ query: { artists: artistNames } })\n  });\n\n  if (!response.ok) {\n    console.error('Batch artist fetch failed:', response.status, response.statusText);\n    return [];\n  }\n\n  const data = await response.json();\n  const results = Array.isArray(data.results) ? data.results : [];\n  console.log('Batch artist API response:', data);\n\n  const filtered = results.filter(a =>\n    a && a.id && a.matchScore != 0\n  );\n  \n  const withLinks = await Promise.all(results.map(async (artist) => {\n        if (!artist || !artist.id) return artist;\n        const linksUrl = `${API}/api/urlmap/links/${encodeURIComponent(artist.id)}`;\n        const bioUrl = `https://api.musicnerd.xyz/api/artistBio/${encodeURIComponent(artist.id)}`;\n      \n        const [linksRes, bioRes] = await Promise.all([\n          fetch(linksUrl),\n          fetch(bioUrl, {\n            method: 'GET',\n            headers: { Accept: 'application/json' },\n          })\n        ]);\n      \n        const links = linksRes.ok ? await linksRes.json() : [];\n        const bio = bioRes.ok ? await bioRes.json() : null;\n      \n        return { ...artist, links, bio};\n    }));\n\n    return withLinks;\n  \n}\n\n", "export function getYTInfo(tabId){\r\n    return new Promise(res=>{\r\n      chrome.tabs.sendMessage(tabId,{type:'GET_YT_INFO'},res);\r\n    });\r\n  }\r\n\r\nexport function scrapeYTInfo(tabId) {\r\n    return new Promise(res => {\r\n        chrome.tabs.sendMessage(tabId, {type: 'SCRAPE_YT_INFO'}, res);\r\n    });\r\n}\r\n\r\nexport async function getMediaSessionInfo(tabId) {\r\ntry {\r\n  const tabs = await chrome.tabs.query({});\r\n  \r\n  const promises = tabs.map(tab =>\r\n    new Promise(resolve => {\r\n      chrome.tabs.sendMessage(tab.id, {action: 'checkMediaSession'}, response => {\r\n        if (chrome.runtime.lastError) {\r\n          resolve(null);\r\n        } else  {\r\n          resolve(response);\r\n        }\r\n      });\r\n    })\r\n  );\r\n\r\n  const results = await Promise.all(promises);\r\n\r\n  console.log(results);\r\n  return results.find(result => result != null && result !== undefined);\r\n} catch(error) {\r\n  console.error('Error getting media session results', error);\r\n}\r\n}\r\n\r\nexport async function isContentScriptReady(tabId) {\r\n  return new Promise((resolve) => {\r\n    chrome.tabs.sendMessage(tabId, {action: 'checkMediaSession'}, (response) => {\r\n      if (chrome.runtime.lastError) {\r\n        resolve(false);\r\n      } else {\r\n        resolve(true);\r\n      }\r\n    });\r\n  });\r\n}", "// Fast hardcoded pattern matching for collaboration detection\r\nexport function hasCollaborationKeywords(title) {\r\n    const patterns = [\r\n      /\\bft\\.?\\s/i,                    // \"ft. \" or \"ft \"\r\n      /\\bfeat\\.?\\s/i,                  // \"feat. \" or \"feat \"  \r\n      /\\bfeaturing\\b/i,                // \"featuring\"\r\n      /\\bwith\\b/i,                     // \"with\"\r\n      /\\sx\\s/i,                        // \" x \" (Artist x Artist)\r\n      /\\s&\\s/,                         // \" & \"\r\n      /\\s\\+\\s/,                        // \" + \"\r\n      /\\bvs\\.?\\b/i,                    // \"vs\" or \"vs.\"\r\n      /\\b(collab|collaboration)\\b/i,   // \"collab\", \"collaboration\"\r\n      /\\bremix by\\b/i,                 // \"remix by\"\r\n      /\\bprod\\.? by\\b/i               // \"prod by\", \"produced by\"\r\n    ];\r\n    \r\n    return patterns.some(pattern => pattern.test(title));\r\n  }\r\n  \r\n  export function shouldCheckForCollaborations(title) {\r\n    // Quick check before doing full multi-artist extraction\r\n    return hasCollaborationKeywords(title);\r\n  } ", "import { fetchArtist, fetchArtistFromName, extractArtistFromTitle, extractMultipleArtistsFromTitle, fetchMultipleArtistsByNames}   from './api.js';\r\nimport { getYTInfo, scrapeYTInfo, getMediaSessionInfo  }     from '../backend/browserInfo.js';\r\nimport { hasCollaborationKeywords } from '../backend/client/collabs.js';\r\nimport { cacheVideoResult, getCachedVideoResult, cacheArtist, getCachedArtist, getCachedMediaSessionResult, cacheMediaSessionResult } from '../backend/client/cache.js';\r\n\r\n// Helper function to extract video ID from URL\r\nfunction getVideoIdFromUrl(url) {\r\n    const patterns = [\r\n        /v=([^&]+)/,\r\n        /youtu\\.be\\/([^?&]+)/,\r\n        /music\\.youtube\\.com\\/watch\\?v=([^&]+)/\r\n    ];\r\n    for (const pattern of patterns) {\r\n        const match = url.match(pattern);\r\n        if (match) return match[1];\r\n    }\r\n    return null;\r\n}\r\n\r\nexport async function fetchMultipleArtists(tabId) {\r\n    // First check for cached video result using tab URL\r\n    const [tab] = await chrome.tabs.query({active: true, currentWindow: true});\r\n    let videoId = null;\r\n    if (tab?.url) {\r\n        videoId = getVideoIdFromUrl(tab.url);\r\n        if (videoId) {\r\n            const cached = await getCachedVideoResult(videoId);\r\n            if (cached) {\r\n                console.log('Returning cached video result for:', videoId);\r\n                return cached;\r\n            }\r\n        }\r\n    }\r\n\r\n    const info = await getYTInfo(tabId);\r\n    let artists = [];\r\n  \r\n    if (info?.id) {\r\n      console.log(\"[DEBUG] \" + info.id);\r\n      const artist = await fetchArtist(info);\r\n      if (artist.id) {\r\n          artists.push({...artist, isPrimary: true});\r\n\r\n          console.log(\"[DEBUG] Youtube lookup successful: \" + artists);\r\n      \r\n          if (hasCollaborationKeywords(info.title)) {\r\n              const allArtistNames = await extractMultipleArtistsFromTitle(info);\r\n              const newNames = allArtistNames.filter(name =>\r\n                  name.toLowerCase() !== artist.name.toLowerCase()\r\n              );\r\n  \r\n              if (newNames.length > 0) {\r\n                  const newArtists = await fetchMultipleArtistsByNames(newNames);\r\n                  const validArtists = newArtists\r\n                      .filter(artist => artist && !artist.error && artist.id)\r\n                      .map(artist => ({...artist, isPrimary: false}));\r\n                  \r\n                  artists.push(...validArtists);\r\n              }\r\n          }   \r\n          \r\n          // Only return early if we found at least one artist\r\n\r\n          if (artists.length > 0) {\r\n              if (videoId) {\r\n                await cacheVideoResult(videoId, artists);\r\n              }\r\n              return artists;\r\n          }\r\n      }\r\n    }\r\n  if (!info?.title || artists.length === 0) {\r\n    console.log(\"falling back to AI\")\r\n    const artistNames = await extractMultipleArtistsFromTitle(info);\r\n    console.log(artistNames);\r\n    \r\n    if (artistNames.length > 0) {\r\n      const foundArtists = await fetchMultipleArtistsByNames(artistNames);\r\n      \r\n      const validArtists = foundArtists\r\n        .filter(artist => artist && !artist.error && artist.id)\r\n        .map(artist => ({ ...artist, isPrimary: false }));\r\n      \r\n      \r\n      artists.push(...validArtists);\r\n    }\r\n  }\r\n  \r\n  // Note: Can't use DOM scraping fallback for media session since we don't have tabId\r\n  if (videoId) {\r\n    await cacheVideoResult(videoId, artists);\r\n  }\r\n  return artists;\r\n  }\r\n  \r\nexport async function fetchArtistsMediaSession() {\r\n  const info = await getMediaSessionInfo();\r\n  console.log('Media session info:', info); // Debug log\r\n  \r\n  \r\n  if (!info) {\r\n    console.log('No media session data available');\r\n    return \"noMediaSession\";\r\n  }\r\n\r\n  const cached = await getCachedMediaSessionResult(info);\r\n  if (cached) {\r\n    console.log(\"cached result found, returning...\") ;\r\n    return cached;\r\n  }\r\n\r\n  let artists = [];\r\n  \r\n  if (info?.title) {\r\n\r\n      const artist = await fetchArtistFromName(info);\r\n      if (artist && !artist.error && artist.id) {\r\n          artists.push({...artist, isPrimary: true});\r\n      \r\n          if (hasCollaborationKeywords(info.title)) {\r\n              const allArtistNames = await extractMultipleArtistsFromTitle(info);\r\n              const newNames = allArtistNames.filter(name =>\r\n                  name.toLowerCase() !== artist.name.toLowerCase()\r\n              );\r\n  \r\n              if (newNames.length > 0) {\r\n                  const newArtists = await fetchMultipleArtistsByNames(newNames);\r\n                  const validArtists = newArtists\r\n                      .filter(artist => artist && !artist.error && artist.id)\r\n                      .map(artist => ({...artist, isPrimary: false}));\r\n                  \r\n                  artists.push(...validArtists);\r\n              }\r\n          }   \r\n          \r\n          // Only return early if we found at least one artist\r\n          if (artists.length > 0) {\r\n            return artists;\r\n          }\r\n      }\r\n    }\r\n  if (!info?.title && artists.length === 0) {\r\n    console.log(\"falling back to AI\")\r\n    const artistNames = await extractMultipleArtistsFromTitle(info);\r\n    console.log(artistNames);\r\n    \r\n    if (artistNames.length > 0) {\r\n      const foundArtists = await fetchMultipleArtistsByNames(artistNames);\r\n      const validArtists = foundArtists\r\n        .filter(artist => artist && !artist.error && artist.id)\r\n        .map(artist => ({ ...artist, isPrimary: false }));\r\n      \r\n      artists.push(...validArtists);\r\n\r\n      cacheMediaSessionResult(info, artists);\r\n    }\r\n  }\r\n  console.log(\"returning artists...\")\r\n  \r\n  return artists;\r\n  \r\n}\r\n", "\r\nimport { renderArtists } from './multi-ui.js';\r\nimport { errorScreen } from './ui.js';\r\nimport { fetchMultipleArtists, fetchArtistsMediaSession } from '../../connections/fetchArtists.js';\r\nimport { isContentScriptReady } from '../../backend/browserInfo.js';\r\nimport { getCachedArtist } from '../../backend/client/cache.js';\r\n\r\n\r\n\r\n\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n  const [tab] = await chrome.tabs.query({active:true,currentWindow:true});\r\n  \r\n  // Check if we're on a YouTube page\r\n\r\n  if (!await isContentScriptReady(tab.id)) {\r\n    errorScreen(\"notInjected\");\r\n    return;\r\n  }\r\n\r\n  if (!tab.url.includes('youtube.com/watch') && !tab.url.includes('music.youtube.com')) {\r\n    const artists = await fetchArtistsMediaSession();\r\n    if (artists.length > 0 && artists != \"noMediaSession\") {\r\n      renderArtists(artists);\r\n    }\r\n    else {\r\n      switch (artists) {\r\n        case \"noMediaSession\": {\r\n          errorScreen(\"noData\");\r\n          break;\r\n        }\r\n        case null || undefined: {\r\n          errorScreen(\"noArtist\");\r\n          break;\r\n        }\r\n      }\r\n    }// Show \"not on YouTube\" message\r\n    return;\r\n  }\r\n\r\n  \r\n\r\n  const artists = await fetchMultipleArtists(tab.id);\r\n  console.log(\"rendering multiple artists\")\r\n  if (artists.length > 0) {\r\n    renderArtists(artists);\r\n  }\r\n  else {\r\n    errorScreen(\"noArtist\");\r\n  }\r\n\r\n});\r\n\r\n\r\n  \r\n  \r\n"],
  "mappings": "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",
  "names": ["artist", "artists"]
}
