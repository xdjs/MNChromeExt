"use strict";(()=>{function i(t){let e=[/v=([^&]+)/,/youtu\.be\/([^?&]+)/,/embed\/([^?&]+)/,/music\.youtube\.com\/watch\?v=([^&]+)/];for(let o of e){let n=t.match(o);if(n)return console.log(n[1]),n[1]}return null}var s="AIzaSyByzNFPU1XR0gm_kfd2EoThjYlVeezmup8";async function c(t){let e=`https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${t}&key=${s}`,n=await(await fetch(e)).json();if(!n.items?.length)return null;let r=n.items[0].snippet;return console.log(r.channelId),{title:r.title,channel:r.channelTitle,description:r.description,tags:r.tags,id:r.channelId}}function l(){let t,e;location.hostname==="music.youtube.com"?(t=document.querySelector(".title.ytmusic-player-bar"),e=document.querySelector(".byline.ytmusic-player-bar a")):(t=document.querySelector("h1.title yt-formatted-string")||document.querySelector("ytd-watch-metadata h1"),e=document.querySelector("#owner-name a")||document.querySelector("ytd-channel-name#channel-name a"));let o=document.querySelector("#description"),n=document.querySelector('a.yt-simple-endpoint.style-scope.yt-formatted-string[href^="/@"]');return console.log("[YT-EXT] titleEl",t,"channelEl",e),t&&console.log("Title: ",t.textContent.trim()),e&&console.log("Channel: ",e.textContent.trim()),e&&t&&o?(console.log(n?.textContent?.trim()),{videoTitle:t.textContent.trim(),channel:e.textContent.trim(),description:o?.textContent.trim(),username:n?.textContent.trim()}):(console.log("no info found"),null)}console.log("[YT-EXT] content script injected");chrome.runtime.onMessage.addListener((t,e,o)=>{if(t.type==="GET_YT_INFO"){let n=i(location.href);if(!n)return o(null),!0;c(n).then(r=>o(r)).catch(r=>{console.error("[YT-EXT] Fetch error",r),o(null)})}return t.type==="SCRAPE_YT_INFO"&&o(l()),!0});})();
